{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to Fims","text":""},{"location":"about/","title":"About fims proto","text":"<p>Just a prototype built by linfengOu and ldXiao.</p>"},{"location":"backend/general_ledger/","title":"General Ledger \u603b\u8d26 (WIP)","text":"<p>\u603b\u8d26\u6a21\u5757, \u96b6\u5c5e\u4e8e\u4e00\u4e2a\u8d26\u5957(<code>SoB</code>), \u5305\u542b\u4e86\u4ee5\u4e0b\u4e1a\u52a1\u5bf9\u8c61:</p> <ul> <li>\u79d1\u76ee(<code>account</code>)</li> <li>\u8f85\u52a9\u6838\u7b97\u7c7b\u522b(<code>auxiliary category</code>)</li> <li>\u8f85\u52a9\u6838\u7b97\u79d1\u76ee(<code>auxiliary account</code>)</li> <li>\u8d26\u671f(<code>period</code>)</li> <li>\u8d26\u7c3f(<code>ledger</code>)</li> <li>\u8f85\u52a9\u6838\u7b97\u8d26\u7c3f(<code>auxiliary ledger</code>)</li> <li>\u8bb0\u8d26\u51ed\u8bc1(<code>voucher</code>)</li> </ul>"},{"location":"backend/general_ledger/#entities-and-relations","title":"Entities and Relations","text":"<p>For diagram simplicity, <code>Period</code> are not connected with others:</p> <ul> <li>All entities are logically belongs to a <code>SoB</code></li> <li><code>Voucher</code> and <code>Ledger</code> are logically belongs to a <code>Period</code></li> </ul> <pre><code>erDiagram\n    VOUCHER ||--|{ LINE_ITEM: \"contains (at least 2)\"\n    LINE_ITEM }o--|| ACCOUNT: \"placed in\"\n    LINE_ITEM }o..o{ AUXILIARY_ACCOUNT: \"placed in\"\n\n    ACCOUNT ||..o| ACCOUNT: \"belongs to\"\n    AUXILIARY_CATEGORY ||..o{ AUXILIARY_ACCOUNT: contains\n    ACCOUNT ||..o{ AUXILIARY_CATEGORY: has\n\n    ACCOUNT ||--|{ LEDGER: \"records in\"\n    AUXILIARY_ACCOUNT ||--|{ AUXILIARY_LEDGER: \"records in\"\n\n    ACCOUNT {\n        UUID id\n        UUID sobId\n        string title\n        string accountNumber\n        int[] numberHierarchy\n        int level\n        Account superiorAccount\n        int class\n        int group\n        BalanceDirection balanceDirection\n        AuxiliaryCategory[] auxiliaryCategories\n    }\n\n    AUXILIARY_CATEGORY {\n        UUID id\n        UUID sobId\n        string key\n        string title\n        bool isStandard\n    }\n\n    AUXILIARY_ACCOUNT {\n        UUID id\n        AuxiliaryCategory category\n        string key\n        string title\n        string description\n    }\n\n    PERIOD {\n        UUID id\n        UUID sobId\n        int fiscalYear\n        int periodNumber\n        Time openingTime\n        Time endingTime\n        bool isClosed\n        bool isCurrent\n    }\n\n    VOUCHER {\n        UUID id\n        UUID sobId\n        UUID periodId\n        VoucherType voucherType\n        string headerText\n        string documentNumber\n        int attachmentQuantity\n        Decimal debit\n        Decimal credit\n        UUID creator\n        UUID reviewer\n        UUID auditor\n        UUID poster\n        bool isReviewed\n        bool isAudited\n        bool isPosted\n        Time transactionTime\n        LineItem[] lineItems\n    }\n\n    LINE_ITEM {\n        UUID id\n        Account account\n        AuxiliaryAccounts[] auxiliaryAccounts\n        string text\n        Decimal debit\n        Decimal credit\n    }\n\n    LEDGER {\n        UUID id\n        UUID periodId\n        Account account\n        Decimal openingDebitBalance\n        Decimal openingCreditBalance\n        Decimal periodDebit\n        Decimal periodCredit\n        Decimal endingDebitBalance\n        Decimal endingCreditBalance\n    }\n\n    AUXILIARY_LEDGER {\n        UUID id\n        UUID periodId\n        AuxiliaryAccount auxiliaryAccount\n        Decimal openingDebitBalance\n        Decimal openingCreditBalance\n        Decimal periodDebit\n        Decimal periodCredit\n        Decimal endingDebitBalance\n        Decimal endingCreditBalance\n    }</code></pre>"},{"location":"backend/general_ledger/close_period/","title":"Close Period","text":"<pre><code>sequenceDiagram\n    actor caller as Caller\n    box General Ledger module\n    participant period as Period\n    participant ledger as Ledger\n    end\n    box Report module\n    participant report as Report\n    end\n\n    caller -&gt;&gt;+ period: Trigger close period\n\n    period -&gt;&gt; period: Update period to closed and get next fiscalYear + number\n\n    opt\n        period -&gt;&gt; period: Create next period if not exists yet\n    end\n\n    period -&gt;&gt; period: Update next period to current period\n\n    period -&gt;&gt; ledger: Create all ledgers for next period\n\n    period -&gt;&gt; report: (Re)calculate report values for old period\n\n    period -&gt;&gt;- caller: Response</code></pre> <p>The report part is not implemented yet.</p>"},{"location":"backend/report/","title":"Report \u62a5\u8868 (WIP)","text":""},{"location":"backend/report/#domain-entities","title":"Domain Entities","text":"<p>Template:</p> <pre><code>id: uuid\nsobId: uuid\nclass: enum # \u62a5\u8868\u7c7b\u522b, \u8d44\u4ea7\u8d1f\u503a\u8868|\u5229\u6da6\u8868|etc.\ntitle: string\ntables:\n- header:\n    text: string\n    columns:\n    - key: string # key of the column\n      value: string # title of the column\n  items:\n  - id: uuid\n    text: string\n    values:\n    - key: string # key of the column\n      value: number # value of the cell\n    level: int\n    sumFactor: int # 1/-1/0, \u5f53\u524d item \u662f\u88ab\u52a0(1)\u8fd8\u662f\u51cf(-1)\u5728\u5408\u8ba1\u91cc\u9762. 0 \u4ee3\u8868\u5728\u5408\u8ba1\u91cc\u9762\u5ffd\u7565\uff0c\u6709\u8fd9\u51e0\u79cd\u60c5\u51b5:\n    # - item \u662f\u7279\u6b8a\u884c\uff08\u6bd4\u5982\u6807\u9898\uff09\u6ca1\u6709\u6570\u5b57\u503c\n    # - breakdown item\uff0c\u4f5c\u4e3a\u4e0a\u7ea7\u6570\u5b57\u7684\u7ec6\u5206\n    # - item \u662f\u5408\u8ba1\u884c, \u6216\u9636\u6bb5\u6027\u7684\u5408\u8ba1\u884c\uff08dataSource \u662f sum\uff09\n    rowNumber: int\n    sequence: int\n    dataSource: enum # formula/sum/na, \u5f53\u524d item \u7684\u6570\u636e\u6e90\u662f\u6765\u81ea\u4e8e\u516c\u5f0f(formula), \u8fd8\u662f\u622a\u81f3\u76ee\u524d\u7684\u7d2f\u52a0(sum)\n    formulas: # \u5f53 dataSource \u662f `formula` \u65f6\uff0c\u6b64\u5b57\u6bb5\u5c06\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a formula:\n    - accountId: string\n      sumFactor: int # 1/-1, \u5f53\u524d\u79d1\u76ee\u6570\u5b57`\u52a0`\u6216`\u51cf`\n      rule: # \u53d6\u6570\u89c4\u5219\uff0c\u4f9d\u636e report type \u4e0d\u540c\uff0c\u6709\u4e24\u5957\u4e0d\u540c\u7684\u53d6\u6570\u89c4\u5219:\n      # - \u8d44\u4ea7\u8d1f\u503a\u8868 B/D/C/AD/AC/CAD/CAC:\n      #   - B: balance, \u4f59\u989d\n      #   - DB: debit balance, \u501f\u65b9\u4f59\u989d\n      #   - CB: credit balance, \u8d37\u65b9\u4f59\u989d\n      #   - ADB ?: account debit balance, \u79d1\u76ee\u501f\u65b9\u4f59\u989d\n      #   - ACB ?: account credit balance, \u79d1\u76ee\u8d37\u65b9\u4f59\u989d\n      #   - CADB ?: current account debit balance, \u5f53\u524d\u79d1\u76ee\u501f\u65b9\u4f59\u989d\n      #   - CACB ?: current account credit balance, \u5f53\u524d\u79d1\u76ee\u8d37\u65b9\u4f59\u989d\n      # - \u5229\u6da6\u8868 PL/D/C:\n      #   - PL: profit and loss, \u635f\u76ca\u53d1\u751f\u989d\n      #   - DA: debit amount, \u501f\u65b9\u53d1\u751f\u989d\n      #   - CA: credit amount, \u8d37\u65b9\u53d1\u751f\u989d\n      values:\n      - key: string # key of the column\n        value: number # value of the column for current formula\n    displaySumFactor: bool\n    displayRowNumber: bool\n    isBreakdownItem: bool\n    isDeletable: bool\n    isNameModifiable: bool\n    isDraggable: bool\n    isAbleToAddChild: bool\n    isAbleToAddSibling: bool\n    isAbleToAddLeaf: bool\n</code></pre> <p>Report:</p> <p><code>Report</code> \u4f1a\u548c <code>Template</code> \u516c\u7528\u6570\u636e\u7ed3\u6784, \u5728\u6b64\u4e4b\u4e0a, <code>Report</code> \u591a\u4e86\u8d26\u671f\u548c\u7248\u672c\u4fe1\u606f.</p> <pre><code>type Report struct {\n    periodId uuid.UUID\n    version  int\n    Template\n}\n</code></pre>"},{"location":"backend/report/samples/","title":"Concept and sample","text":""},{"location":"backend/report/samples/#balance-sheet","title":"Balance Sheet \u8d44\u4ea7\u8d1f\u503a\u8868","text":"<p><code>\u8d44\u4ea7 = \u8d1f\u503a + \u6240\u6709\u8005\u6743\u76ca</code></p> \u8d44\u4ea7 \u671f\u672b\u4f59\u989d \u5e74\u521d\u4f59\u989d \u8d1f\u503a\u548c\u6240\u6709\u8005\u6743\u76ca \u671f\u672b\u4f59\u989d \u5e74\u521d\u4f59\u989d \u6d41\u52a8\u8d44\u4ea7 \u6d41\u52a8\u8d1f\u503a \u8d27\u5e01\u8d44\u91d1 232.00 150.00 \u77ed\u671f\u501f\u6b3e 100.00 120.00 ... ... \u6d41\u52a8\u8d44\u4ea7\u5408\u8ba1 232.00 150.00 \u6d41\u52a8\u8d1f\u503a\u5408\u8ba1 100.00 120.00 \u975e\u6d41\u52a8\u8d44\u4ea7 \u975e\u6d41\u52a8\u8d1f\u503a \u503a\u6743\u6295\u8d44 232.00 150.00 \u957f\u671f\u501f\u6b3e 100.00 120.00 ... ... \u975e\u6d41\u52a8\u8d44\u4ea7\u5408\u8ba1 232.00 150.00 \u975e\u6d41\u52a8\u8d1f\u503a\u5408\u8ba1 100.00 120.00 \u6240\u6709\u8005\u6743\u76ca \u5b9e\u6536\u8d44\u672c(\u6216\u80a1\u672c) 264.00 60.00 ... \u6240\u6709\u8005\u6743\u76ca\u5408\u8ba1 264.00 60.00 \u8d44\u4ea7\u603b\u8ba1 464.00 300.00 \u8d1f\u503a\u548c\u6240\u6709\u8005\u6743\u76ca\u603b\u8ba1 464.00 300.00"},{"location":"backend/report/samples/#income-statement","title":"Income Statement \u5229\u6da6\u8868","text":"<p>\u8425\u4e1a\u5229\u6da6 = \u8425\u4e1a\u6536\u5165 - \u8425\u4e1a\u6210\u672c - \u9500\u552e\u8d39\u7528 - ... \u5229\u6da6\u603b\u548c = \u8425\u4e1a\u5229\u6da6 + \u8425\u4e1a\u5916\u6536\u5165 - \u8425\u4e1a\u5916\u652f\u51fa \u51c0\u5229\u6da6 = \u5229\u6da6\u603b\u548c - \u6240\u5f97\u7a0e\u8d39\u7528 (\u7efc\u5408\u6536\u76ca\u603b\u989d = \u51c0\u5229\u6da6 + \u5176\u4ed6\u7efc\u5408\u6536\u76ca\u7684\u7a0e\u540e\u51c0\u989d)</p> \u9879\u76ee \u672c\u5e74\u7d2f\u8ba1\u91d1\u989d \u672c\u6708\u91d1\u989d 1. \u8425\u4e1a\u6536\u5165 123.00 123.00 \u00a0\u00a0\u00a0\u00a0\u51cf: \u8425\u4e1a\u6210\u672c 123.00 123.00 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u9500\u552e\u8d39\u7528 123.00 123.00 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u7ba1\u7406\u8d39\u7528 123.00 123.00 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0... ... ... 2. \u8425\u4e1a\u5229\u6da6\uff08\u4e8f\u635f\u4ee5\u201c-\u201d\u53f7\u586b\u5217\uff09 123.00 123.00 \u00a0\u00a0\u00a0\u00a0\u52a0: \u8425\u4e1a\u5916\u6536\u5165 123.00 123.00 \u00a0\u00a0\u00a0\u00a0\u51cf: \u8425\u4e1a\u5916\u652f\u51fa 123.00 123.00 3. \u5229\u6da6\u603b\u989d\uff08\u4e8f\u635f\u603b\u989d\u4ee5\u201c-\u201d\u53f7\u586b\u5217\uff09 123.00 123.00 \u00a0\u00a0\u00a0\u00a0\u51cf: \u6240\u5f97\u7a0e\u8d39\u7528 123.00 123.00 3. \u51c0\u5229\u6da6\uff08\u51c0\u4e8f\u635f\u4ee5\u201c-\u201d\u53f7\u586b\u5217\uff09 123.00 123.00"},{"location":"backend/report/samples/#others","title":"Others","text":"<p>\u53e6\u5916\u8fd8\u6709\u4e00\u4e9b\u6807\u51c6\u62a5\u8868: \u73b0\u91d1\u6d41\u91cf\u8868, \u4e3b\u8981\u5e94\u4ea4\u7a0e\u91d1\u660e\u7ec6\u8868, \u8d39\u7528\u660e\u7ec6\u8868. \u4e4b\u540e\u518d\u8bf4.</p>"},{"location":"backend/report/save_report/","title":"When to Save Report","text":"<ol> <li>\u5f53\u524d\u8d26\u671f\u5173\u95ed\u7684\u65f6\u5019, \u4f1a\u4fdd\u5b58 (\u66f4\u65b0) \u4e00\u6b21\u5f53\u524d\u8d26\u671f\u7684 report. See Close Period.</li> <li> <p>\u5728\u90a3\u4e4b\u524d, \u6bcf\u6b21\u7528\u6237\u67e5\u770b report \u65f6, \u9488\u5bf9\u67e5\u770b\u7684\u8d26\u671f (\u53ef\u80fd\u662f\u5f53\u524d\u8d26\u671f, \u4e5f\u6709\u53ef\u80fd\u662f\u672a\u6765\u8d26\u671f), \u5982\u679c\u8fd8\u6ca1\u6709 report \u751f\u6210\u65f6, \u5e94\u8be5\u5728\u6b64\u65f6\u751f\u6210.</p> <p>\u5f53\u521b\u5efa voucher \u65f6, \u53ef\u4ee5\u521b\u5efa\u5728\u672a\u6765, \u8fd9\u65f6\u5019\u4f1a\u751f\u6210\u672a\u6765\u7684\u8d26\u671f.</p> </li> <li> <p>\u7528\u6237\u5728\u67e5\u770b report \u7684\u65f6\u5019, \u5e94\u8be5\u6709\u673a\u4f1a\u8981\u6c42\u91cd\u65b0\u751f\u6210 report.</p> </li> <li>\u8fc7\u53bb\u7684\u8d26\u671f\u5e94\u8be5\u90fd\u6709 report, \u9664\u975e\u662f\u65b0\u589e\u4e86 template. \u8fd9\u79cd\u60c5\u51b5\u5e94\u8be5\u53ef\u4ee5\u901a\u8fc7\u7b2c 3 \u70b9\u89e3\u51b3.</li> </ol>"},{"location":"backend/report/save_report/#ui","title":"\u5efa\u8bae\u7684 UI","text":"<p>\u5f53\u524d\u7aef\u5c1d\u8bd5\u6e32\u67d3 report, \u8bf7\u6c42\u540e\u7aef find report, \u4f46\u662f\u62ff\u5230\u4e86 404 \u65f6, \u524d\u6bb5\u63d0\u793a Report not yet generated. \u5e76\u4e14\u63d0\u4f9b\u6309\u94ae <code>\u751f\u6210\u62a5\u8868</code>, \u89e6\u53d1\u540e\u7aef\u7684\u6839\u636e <code>templateId</code> + <code>periodId</code> \u8c03\u7528 <code>processor</code> \u751f\u6210 report \u5e76\u4fdd\u5b58. \u524d\u7aef\u77e5\u6653 202 created \u4e4b\u540e, \u518d\u6b21\u8c03\u7528 find report API.</p> <p>\u5373, \u7528\u6237\u6d41\u7a0b\u4e2d, \u53ea\u6709\u4e24\u4e2a\u70b9\u4f1a\u89e6\u53d1\u540e\u7aef\u8ba1\u7b97\u5e76\u4fdd\u5b58 (\u6216\u66f4\u65b0) report:</p> <ol> <li><code>\u751f\u6210\u62a5\u8868</code> \u6309\u94ae</li> <li><code>Close Period</code> \u6d41\u7a0b</li> </ol>"},{"location":"backend/report/save_report/#_1","title":"\u5efa\u8bae\u7684\u540e\u7aef","text":"<ul> <li>Database \u4e2d, \u4e0d\u4fdd\u5b58 <code>template</code> \u91cc\u9762\u7684 values</li> <li>\u6bcf\u6b21\u7f16\u8f91 <code>report</code> \u65f6\u5176\u5b9e\u663e\u793a\u7684\u662f\u5f53\u524d period \u7684 report, \u800c\u4fdd\u5b58\u65f6\u8c03\u7528\u7684\u662f <code>template</code> \u7684\u66f4\u65b0\u63a5\u53e3</li> </ul>"},{"location":"backend/sob/","title":"SoB \u8d26\u5957 (WIP)","text":"<p><code>SoB</code> (Set of Books) is the unit for accounting activities. Usually one <code>SoB</code> represents one company, or a department.</p>"},{"location":"backend/sob/#entities-and-relations","title":"Entities and Relations","text":"<pre><code>erDiagram\n    SOB {\n        UUID id\n        string name\n        string description\n        string baseCurrency\n        int startingPeriodYear\n        int startingPeriodMonth\n        int[] accountsCodeLength\n    }</code></pre>"},{"location":"backend/sob/create_sob/","title":"Create SoB","text":"<pre><code>sequenceDiagram\n    actor caller as Caller\n    participant sob as SoB\n    participant gl as General Ledger\n    participant num as Numbering\n    participant report as Report\n\n    caller -&gt;&gt;+ sob: Trigger create SoB\n    sob -&gt;&gt; sob: Create SoB\n\n    sob -&gt;&gt;+ gl: Initialize general ledger\n    gl -&gt;&gt; gl: Create all accounts\n    gl -&gt;&gt; gl: Create the 1st period\n    gl -&gt;&gt; num: Create identifier configuration for voucher in the 1st period\n    gl -&gt;&gt; gl: Create all ledgers in the 1st period\n    gl --&gt;&gt;- sob: Finish\n\n    sob -&gt;&gt;+ report: Initialize reports\n    report -&gt;&gt; report: Create report templates\n    report --&gt;&gt;- sob: Finish\n    sob -&gt;&gt;- caller: Response</code></pre>"}]}